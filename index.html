<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banjara Connect</title>
    <!-- PWA Meta -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f97316">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Banjara Connect">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="description"
        content="Connect with the Banjara community - Share stories, reels, and connect with your heritage">
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        saffron: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .story-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                linear-gradient(45deg, #f97316, #fb923c) border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .story-circle:active {
            transform: scale(0.95);
        }

        .story-inner {
            width: 62px;
            height: 62px;
            border-radius: 50%;
            overflow: hidden;
            background: #fed7aa;
        }

        .post-img {
            aspect-ratio: 1;
            object-fit: cover;
        }

        .gradient-text {
            background: linear-gradient(45deg, #f97316 0%, #fb923c 25%, #ea580c 50%, #c2410c 75%, #9a3412 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .like-heart {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .like-heart.liked {
            animation: likeAnimation 0.5s ease-in-out;
        }

        @keyframes likeAnimation {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        .create-modal {
            background: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .loader {
            border: 3px solid #fed7aa;
            border-top: 3px solid #f97316;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .comment-modal {
            animation: slideUp 0.3s ease-out;
        }

        .smooth-scroll {
            scroll-behavior: smooth;
        }

        .video-container {
            position: relative;
            width: 100%;
            aspect-ratio: 9/16;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        input:focus,
        button:focus {
            outline: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            box-shadow: 0 8px 16px rgba(249, 115, 22, 0.3);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .profile-badge {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f97316, #fb923c);
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
    </style>
</head>

<body class="bg-saffron-50 text-saffron-700 min-h-screen">
    <!-- Loading Screen -->
    <div id="loadingScreen"
        class="fixed inset-0 bg-gradient-to-br from-saffron-500 to-saffron-600 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="loader mx-auto mb-4"></div>
            <h2 class="text-white text-2xl font-bold">Banjara Connect</h2>
            <p class="text-saffron-100 mt-2">Loading your community...</p>
        </div>
    </div>

    <!-- Login Page -->
    <div id="loginPage"
        class="hidden min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-saffron-50 to-white">
        <div class="w-full max-w-md space-y-6">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold gradient-text mb-2">Banjara Connect</h1>
                <p class="text-saffron-600">Connect with your heritage</p>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-xl space-y-4">
                <input type="text" id="usernameInput" placeholder="Choose Username (Optional)"
                    class="w-full p-3 border border-saffron-300 rounded-lg focus:ring-2 focus:ring-saffron-500 transition">

                <input type="file" id="profileImageInput" accept="image/*" class="hidden">
                <button onclick="document.getElementById('profileImageInput').click()"
                    class="w-full bg-saffron-100 text-saffron-600 py-3 rounded-lg font-semibold hover:bg-saffron-200 transition">
                    <i class="fas fa-camera mr-2"></i>Upload Profile Photo
                </button>

                <div id="profilePreview"
                    class="hidden mx-auto w-20 h-20 rounded-full bg-saffron-200 flex items-center justify-center overflow-hidden border-2 border-saffron-300">
                    <i class="fas fa-user text-saffron-500 text-3xl"></i>
                </div>

                <div id="phoneSection">
                    <input type="tel" id="phoneInput" placeholder="Mobile Number (10 digits)" maxlength="10"
                        class="w-full p-3 border border-saffron-300 rounded-lg focus:ring-2 focus:ring-saffron-500 transition"
                        oninput="checkPhone()">
                    <button onclick="sendOTP()" id="sendOtpBtn"
                        class="w-full mt-4 btn-primary text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled>Next</button>
                </div>

                <div id="otpSection" class="hidden space-y-4">
                    <input type="text" id="otpInput" placeholder="Enter OTP" maxlength="6"
                        class="w-full p-3 border border-saffron-300 rounded-lg focus:ring-2 focus:ring-saffron-500 text-center text-2xl tracking-widest">
                    <p class="text-xs text-saffron-600 text-center">Demo: Use <strong>123456</strong></p>
                    <button onclick="verifyOTP()"
                        class="w-full btn-primary text-white py-3 rounded-lg font-semibold">Log In</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="hidden min-h-screen bg-saffron-50">
        <!-- Home Header -->
        <header id="homeHeader"
            class="fixed top-0 left-0 right-0 bg-white border-b border-saffron-200 z-50 px-4 py-3 flex items-center justify-between shadow-sm">
            <h1 class="font-bold gradient-text text-xl">Banjara Connect</h1>
            <div class="flex space-x-2">
                <button onclick="showNotifications()" class="p-2 hover:bg-saffron-100 rounded-full transition relative"
                    aria-label="Notifications">
                    <i class="fas fa-bell text-saffron-600 text-lg"></i>
                    <span
                        class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold">3</span>
                </button>
                <button onclick="showCreateModal()" class="p-2 hover:bg-saffron-100 rounded-full transition"
                    aria-label="Create">
                    <i class="fas fa-plus text-saffron-600 text-lg"></i>
                </button>
            </div>
        </header>

        <!-- Top Nav -->
        <nav id="topNav"
            class="hidden fixed top-0 left-0 right-0 bg-white border-b border-saffron-200 z-50 px-4 py-3 flex items-center justify-between shadow-sm">
            <button onclick="goBack()" class="p-2 hover:bg-saffron-100 rounded-full transition" aria-label="Back">
                <i class="fas fa-arrow-left text-saffron-600"></i>
            </button>
            <h1 id="topTitle" class="font-semibold text-saffron-700 text-lg">Page</h1>
            <button onclick="showProfile()" class="p-2 hover:bg-saffron-100 rounded-full transition"
                aria-label="Profile">
                <i class="fas fa-user text-saffron-600"></i>
            </button>
        </nav>

        <!-- Create Modal -->
        <div id="createModal" class="hidden fixed inset-0 create-modal flex items-end justify-center z-50 p-0">
            <div class="bg-white rounded-t-3xl p-6 w-full max-w-md shadow-2xl modal-content">
                <div class="w-12 h-1 bg-saffron-300 rounded-full mx-auto mb-6"></div>
                <h2 class="text-2xl font-bold text-saffron-700 mb-6">Create</h2>
                <div class="space-y-3">
                    <button onclick="createReel()"
                        class="w-full btn-primary text-white py-4 rounded-xl font-semibold flex items-center justify-center">
                        <i class="fas fa-video mr-3"></i>Create Reel
                    </button>
                    <button onclick="uploadStory()"
                        class="w-full bg-saffron-100 text-saffron-700 py-4 rounded-xl font-semibold border-2 border-saffron-300 flex items-center justify-center hover:bg-saffron-200 transition">
                        <i class="fas fa-plus-circle mr-3"></i>Upload Story
                    </button>
                    <button onclick="createPost()"
                        class="w-full bg-saffron-100 text-saffron-700 py-4 rounded-xl font-semibold border-2 border-saffron-300 flex items-center justify-center hover:bg-saffron-200 transition">
                        <i class="fas fa-image mr-3"></i>Create Post
                    </button>
                </div>
                <button onclick="closeCreateModal()"
                    class="w-full mt-6 text-saffron-600 font-semibold py-2">Cancel</button>
            </div>
        </div>

        <!-- Notifications Modal -->
        <div id="notificationsModal"
            class="hidden fixed inset-0 create-modal flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-2xl max-w-md w-full max-h-[70vh] overflow-hidden shadow-2xl modal-content">
                <div class="sticky top-0 bg-white p-4 border-b border-saffron-200 flex items-center justify-between">
                    <h2 class="font-bold text-saffron-700 text-xl">Notifications</h2>
                    <button onclick="closeNotifications()" class="p-2 hover:bg-saffron-100 rounded-full transition"
                        aria-label="Close">
                        <i class="fas fa-times text-saffron-600"></i>
                    </button>
                </div>
                <div class="p-4 space-y-4 overflow-y-auto" style="max-height: calc(70vh - 60px)">
                    <div
                        class="flex items-start space-x-3 p-3 hover:bg-saffron-50 rounded-lg cursor-pointer transition">
                        <i class="fas fa-heart text-red-500 text-xl mt-1"></i>
                        <div class="flex-1">
                            <p class="text-saffron-700"><strong>rajesh_k</strong> liked your post</p>
                            <p class="text-saffron-500 text-sm">2 hours ago</p>
                        </div>
                    </div>
                    <div
                        class="flex items-start space-x-3 p-3 hover:bg-saffron-50 rounded-lg cursor-pointer transition">
                        <i class="fas fa-comment text-saffron-500 text-xl mt-1"></i>
                        <div class="flex-1">
                            <p class="text-saffron-700"><strong>priya_d</strong> commented on your reel</p>
                            <p class="text-saffron-500 text-sm">5 hours ago</p>
                        </div>
                    </div>
                    <div
                        class="flex items-start space-x-3 p-3 hover:bg-saffron-50 rounded-lg cursor-pointer transition">
                        <i class="fas fa-user-plus text-blue-500 text-xl mt-1"></i>
                        <div class="flex-1">
                            <p class="text-saffron-700"><strong>anita_b</strong> started following you</p>
                            <p class="text-saffron-500 text-sm">1 day ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comment Modal -->
        <div id="commentModal" class="hidden fixed inset-0 create-modal flex items-end justify-center z-50">
            <div class="bg-white rounded-t-3xl w-full max-w-md max-h-[80vh] shadow-2xl comment-modal flex flex-col">
                <div class="p-4 border-b border-saffron-200 flex items-center justify-between">
                    <h2 class="font-bold text-saffron-700 text-lg">Comments</h2>
                    <button onclick="closeCommentModal()" class="p-2 hover:bg-saffron-100 rounded-full transition"
                        aria-label="Close">
                        <i class="fas fa-times text-saffron-600"></i>
                    </button>
                </div>
                <div id="commentsList" class="flex-1 overflow-y-auto p-4 space-y-4">
                    <!-- Comments loaded dynamically -->
                </div>
                <div class="p-4 border-t border-saffron-200">
                    <div class="flex space-x-2">
                        <input type="text" id="commentInput" placeholder="Add a comment..."
                            class="flex-1 p-3 border border-saffron-300 rounded-full focus:ring-2 focus:ring-saffron-500">
                        <button onclick="postComment()" class="btn-primary text-white px-6 rounded-full font-semibold"
                            aria-label="Post comment">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Story Modal -->
        <!-- Story Modal -->
        <div id="storyModal" class="hidden fixed inset-0 bg-black z-50 flex items-center justify-center">
            <button onclick="closeStory()" class="absolute top-4 right-4 p-3 bg-white rounded-full shadow-lg z-10"
                aria-label="Close">
                <i class="fas fa-times text-saffron-600"></i>
            </button>
            <div class="w-full h-full flex items-center justify-center p-4">
                <!-- Content loaded dynamically -->
            </div>
            <div class="absolute bottom-8 left-0 right-0 flex justify-center space-x-6 px-4">
                <button onclick="likeStory()" class="bg-white p-4 rounded-full shadow-lg hover:scale-110 transition"
                    aria-label="Like">
                    <i class="fas fa-heart text-red-500 text-xl"></i>
                </button>
                <button onclick="shareStory()" class="bg-white p-4 rounded-full shadow-lg hover:scale-110 transition"
                    aria-label="Share">
                    <i class="fas fa-share text-saffron-600 text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Main Feed -->
        <main id="feed" class="pt-16 pb-20">
            <!-- Stories -->
            <div class="bg-white border-b border-saffron-200 px-4 py-4 overflow-x-auto">
                <div class="flex space-x-4" id="storiesContainer">
                    <!-- Stories loaded dynamically -->
                </div>
            </div>

            <!-- Posts Feed -->
            <div id="postsFeed" class="space-y-0">
                <!-- Posts loaded dynamically -->
            </div>
        </main>

        <!-- Search Page -->
        <section id="search" class="hidden min-h-screen pt-16 pb-20 bg-saffron-50">
            <div class="bg-white p-4 border-b border-saffron-200 shadow-sm sticky top-16 z-10">
                <div class="flex space-x-2">
                    <input type="text" id="searchInput" placeholder="Search users, posts..." oninput="performSearch()"
                        class="flex-1 p-3 border border-saffron-300 rounded-full focus:ring-2 focus:ring-saffron-500">
                    <button class="p-3 bg-saffron-100 rounded-full hover:bg-saffron-200 transition" aria-label="Filter">
                        <i class="fas fa-sliders-h text-saffron-600"></i>
                    </button>
                </div>
            </div>

            <!-- Story Circles Grid -->
            <div class="p-4">
                <h3 class="font-bold text-saffron-700 mb-4 text-lg">Discover Stories</h3>
                <div class="grid grid-cols-4 gap-4" id="searchStoriesGrid">
                    <!-- Stories loaded here -->
                </div>
            </div>

            <div id="searchResults" class="p-4">
                <h3 class="font-bold text-saffron-700 mb-4 text-lg">Posts</h3>
                <div class="grid grid-cols-3 gap-1" id="searchPostsGrid">
                    <!-- Search results loaded here -->
                </div>
            </div>
        </section>

        <!-- Reels Page -->
        <!-- Reels Page -->
        <section id="reels" class="hidden min-h-screen bg-black">
            <div id="reelsContainer" class="h-screen overflow-y-auto snap-y snap-mandatory">
                <div class="relative h-screen snap-center flex items-center justify-center bg-black" data-reel="0">
                    <div class="w-full h-full" id="reel-container-0"></div>
                    <div class="absolute bottom-20 left-4 text-white space-y-4 z-10 max-w-xs">
                        <p class="font-bold text-xl drop-shadow-lg">Banjara Status #1</p>
                        <div class="flex space-x-6">
                            <button onclick="likeReel(1)" class="flex flex-col items-center" title="Like reel">
                                <i class="far fa-heart text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">1.2k</span>
                            </button>
                            <button onclick="commentReel(1)" class="flex flex-col items-center" title="Comment on reel">
                                <i class="far fa-comment text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">45</span>
                            </button>
                            <button onclick="shareReel(1)" class="flex flex-col items-center" title="Share reel">
                                <i class="fas fa-share text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="relative h-screen snap-center flex items-center justify-center bg-black" data-reel="1">
                    <div class="w-full h-full" id="reel-container-1"></div>
                    <div class="absolute bottom-20 left-4 text-white space-y-4 z-10 max-w-xs">
                        <p class="font-bold text-xl drop-shadow-lg">Love Shayari #2</p>
                        <div class="flex space-x-6">
                            <button onclick="likeReel(2)" class="flex flex-col items-center" title="Like reel">
                                <i class="far fa-heart text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">890</span>
                            </button>
                            <button onclick="commentReel(2)" class="flex flex-col items-center" title="Comment on reel">
                                <i class="far fa-comment text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">23</span>
                            </button>
                            <button onclick="shareReel(2)" class="flex flex-col items-center" title="Share reel">
                                <i class="fas fa-share text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="relative h-screen snap-center flex items-center justify-center bg-black" data-reel="2">
                    <div class="w-full h-full" id="reel-container-2"></div>
                    <div class="absolute bottom-20 left-4 text-white space-y-4 z-10 max-w-xs">
                        <p class="font-bold text-xl drop-shadow-lg">Diwani Chu #3</p>
                        <div class="flex space-x-6">
                            <button onclick="likeReel(3)" class="flex flex-col items-center" title="Like reel">
                                <i class="far fa-heart text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">1.5k</span>
                            </button>
                            <button onclick="commentReel(3)" class="flex flex-col items-center" title="Comment on reel">
                                <i class="far fa-comment text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">67</span>
                            </button>
                            <button onclick="shareReel(3)" class="flex flex-col items-center" title="Share reel">
                                <i class="fas fa-share text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="relative h-screen snap-center flex items-center justify-center bg-black" data-reel="3">
                    <div class="w-full h-full" id="reel-container-3"></div>
                    <div class="absolute bottom-20 left-4 text-white space-y-4 z-10 max-w-xs">
                        <p class="font-bold text-xl drop-shadow-lg">Banjara Song #4</p>
                        <div class="flex space-x-6">
                            <button onclick="likeReel(4)" class="flex flex-col items-center" title="Like reel">
                                <i class="far fa-heart text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">2.1k</span>
                            </button>
                            <button onclick="commentReel(4)" class="flex flex-col items-center" title="Comment on reel">
                                <i class="far fa-comment text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                                <span class="text-sm mt-1">89</span>
                            </button>
                            <button onclick="shareReel(4)" class="flex flex-col items-center" title="Share reel">
                                <i class="fas fa-share text-3xl drop-shadow-lg hover:scale-110 transition"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Messages Page -->
        <section id="messages" class="hidden min-h-screen pt-16 pb-20 bg-saffron-50">
            <!-- Groups Section -->
            <div class="bg-white p-4 border-b border-saffron-200">
                <h3 class="font-bold text-saffron-700 mb-3">Groups</h3>
                <div class="space-y-2">
                    <div
                        class="flex items-center space-x-3 p-3 bg-saffron-50 rounded-xl cursor-pointer hover:bg-saffron-100 transition">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-saffron-500 to-saffron-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-semibold text-saffron-700">Banjara Wanderers</p>
                            <p class="text-sm text-saffron-600">234 members ‚Ä¢ 12 new messages</p>
                        </div>
                    </div>
                    <div
                        class="flex items-center space-x-3 p-3 bg-saffron-50 rounded-xl cursor-pointer hover:bg-saffron-100 transition">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-saffron-500 to-saffron-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-semibold text-saffron-700">Cultural Heritage</p>
                            <p class="text-sm text-saffron-600">156 members ‚Ä¢ 5 new messages</p>
                        </div>
                    </div>
                    <div
                        class="flex items-center space-x-3 p-3 bg-saffron-50 rounded-xl cursor-pointer hover:bg-saffron-100 transition">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-saffron-500 to-saffron-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-semibold text-saffron-700">Banjara Artists</p>
                            <p class="text-sm text-saffron-600">89 members ‚Ä¢ 2 new messages</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Direct Messages -->
            <div class="p-4">
                <h3 class="font-bold text-saffron-700 mb-3">Direct Messages</h3>
                <div class="space-y-3" id="messagesList">
                    <!-- Messages loaded dynamically -->
                </div>
        </section>

        <!-- Random Chat Page -->
        <section id="randomchat" class="hidden min-h-screen pt-16 pb-20 bg-saffron-50">
            <div class="p-4">
                <div class="bg-white rounded-2xl p-8 shadow-lg text-center">
                    <div
                        class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-saffron-500 to-saffron-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-video text-white text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-saffron-700 mb-3">Random Video Chat</h2>
                    <p class="text-saffron-600 mb-6">Connect with random Banjara community members</p>
                    <button onclick="startRandomChat()" id="startChatBtn"
                        class="btn-primary text-white py-4 px-8 rounded-xl font-semibold text-lg">
                        <i class="fas fa-video mr-2"></i>Start Chat
                    </button>
                </div>
                <div id="chatInterface" class="hidden mt-4 space-y-4">
                    <div class="bg-white rounded-2xl p-4 shadow-lg">
                        <div class="grid grid-cols-1 gap-4">
                            <div class="video-container bg-saffron-900 flex items-center justify-center">
                                <video id="localVideo" autoplay muted class="w-full h-full object-cover"></video>
                            </div>
                            <div class="video-container bg-saffron-800 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <div class="loader mx-auto mb-4"></div>
                                    <p>Connecting...</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center space-x-4 mt-4">
                            <button onclick="endRandomChat()"
                                class="bg-red-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-red-600 transition">
                                <i class="fas fa-phone-slash mr-2"></i>End Call
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profile" class="hidden min-h-screen pt-16 pb-20 bg-saffron-50">
            <div class="bg-white p-6 border-b border-saffron-200">
                <div class="flex items-center space-x-4 mb-6">
                    <div
                        class="w-24 h-24 bg-gradient-to-br from-saffron-500 to-saffron-600 rounded-full flex items-center justify-center text-white text-3xl font-bold">
                        <span id="profileInitial">U</span>
                    </div>
                    <div class="flex-1">
                        <h2 id="profileUsername" class="text-2xl font-bold text-saffron-700">User</h2>
                        <p class="text-saffron-600">@username</p>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <p class="text-2xl font-bold text-saffron-700">12</p>
                        <p class="text-sm text-saffron-600">Posts</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-saffron-700">543</p>
                        <p class="text-sm text-saffron-600">Followers</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-saffron-700">234</p>
                        <p class="text-sm text-saffron-600">Following</p>
                    </div>
                </div>
                <button class="w-full mt-6 btn-primary text-white py-3 rounded-xl font-semibold">
                    Edit Profile
                </button>
            </div>
            <div class="p-4">
                <h3 class="font-bold text-saffron-700 mb-4">My Posts</h3>
                <div class="grid grid-cols-3 gap-2">
                    <!-- User posts grid -->
                </div>
            </div>
        </section>

        <!-- Bottom Nav -->
        <nav
            class="fixed bottom-0 left-0 right-0 bg-white border-t border-saffron-200 flex justify-around py-2 z-50 shadow-lg">
            <button onclick="showPage('feed')" class="flex flex-col items-center text-xs p-2 transition"
                aria-label="Home">
                <i class="fas fa-home text-saffron-600 text-xl mb-1"></i>
                <span class="text-saffron-600 font-medium">Home</span>
            </button>
            <button onclick="showPage('search')" class="flex flex-col items-center text-xs p-2 transition"
                aria-label="Search">
                <i class="fas fa-search text-saffron-600 text-xl mb-1"></i>
                <span class="text-saffron-600 font-medium">Search</span>
            </button>
            <button onclick="showPage('reels')" class="flex flex-col items-center text-xs p-2 transition"
                aria-label="Reels">
                <i class="fas fa-video text-saffron-600 text-xl mb-1"></i>
                <span class="text-saffron-600 font-medium">Reels</span>
            </button>
            <button onclick="showPage('messages')" class="flex flex-col items-center text-xs p-2 transition"
                aria-label="Messages">
                <i class="far fa-comment text-saffron-600 text-xl mb-1"></i>
                <span class="text-saffron-600 font-medium">Messages</span>
            </button>
            <button onclick="showPage('randomchat')" class="flex flex-col items-center text-xs -mt-4 transition"
                aria-label="Random Chat">
                <div class="bg-gradient-to-r from-saffron-500 to-saffron-600 rounded-full p-3 shadow-lg">
                    <i class="fas fa-video text-white text-xl"></i>
                </div>
                <span class="text-saffron-600 font-medium mt-1">Random</span>
            </button>
        </nav>
    </div>

    <script>
        // Global State
        let currentUser = null;
        let currentPage = 'feed';
        let likedPosts = new Set();
        let currentPostComments = [];

        // PWA Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }

        // Data
        const stories = [
            { name: 'You', image: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=600', video: null },
            { name: 'Rajesh', image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600', video: 'https://www.youtube.com/embed/1bvGFTovtIA?autoplay=1&mute=0' },
            { name: 'Priya', image: 'https://womansbible.com/wp-content/uploads/2024/03/woman-wearing-blue-denim-jacket-and-eyeglasses-standing-and-laughing-QjcK2t0lXN8-1600x832.jpeg', video: 'https://www.youtube.com/embed/LXCNNRnOD-s?autoplay=1&mute=0' },
            { name: 'Anita', image: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=600', video: 'https://www.youtube.com/embed/JlagpKQjodQ?autoplay=1&mute=0' },
            { name: 'Kumar', image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=600', video: 'https://www.youtube.com/embed/DAHjPkz6xro?autoplay=1&mute=0' },
            { name: 'Meera', image: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=600', video: null },
            { name: 'Sanjay', image: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=600', video: null },
            { name: 'Kavita', image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=600', video: null }
        ];

        const posts = [
            {
                id: 1,
                user: 'Rajesh Kumar',
                avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100',
                image: 'https://images.pexels.com/photos/207662/pexels-photo-207662.jpeg?auto=compress&cs=tinysrgb&w=600',
                caption: 'Beautiful Banjara culture! üáÆüá≥ #BanjaraPride',
                likes: 124,
                comments: 8,
                time: '2 hours ago'
            },
            {
                id: 2,
                user: 'Priya Sharma',
                avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100',
                image: 'https://images.pexels.com/photos/1300403/pexels-photo-1300403.jpeg?auto=compress&cs=tinysrgb&w=600',
                caption: 'Traditional Banjara jewelry ‚ú® #Heritage',
                likes: 89,
                comments: 12,
                time: '5 hours ago'
            },
            {
                id: 3,
                user: 'Anita Patel',
                avatar: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=100',
                image: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=600',
                caption: 'Banjara dance performance üé≠ #Culture',
                likes: 156,
                comments: 23,
                time: '1 day ago'
            },
            {
                id: 4,
                user: 'Kumar Singh',
                avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100',
                image: 'https://images.pexels.com/photos/3560168/pexels-photo-3560168.jpeg?auto=compress&cs=tinysrgb&w=600',
                caption: 'Festival celebrations üéâ #BanjaraFestival',
                likes: 203,
                comments: 34,
                time: '2 days ago'
            }
        ];

        const reels = [
            { id: 0, title: 'Banjara Status #1', embed: '1bvGFTovtIA', likes: '1.2k', comments: 45 },
            { id: 1, title: 'Love Shayari #2', embed: 'LXCNNRnOD-s', likes: '890', comments: 23 },
            { id: 2, title: 'Diwani Chu #3', embed: 'JlagpKQjodQ', likes: '1.5k', comments: 67 },
            { id: 3, title: 'Banjara Song #4', embed: 'DAHjPkz6xro', likes: '2.1k', comments: 89 }
        ];

        let reelPlayers = {};
        let currentReelIndex = 0;

        const messages = [
            { user: 'Rajesh Kumar', avatar: 'RK', message: 'Hey, how are you?', time: '2m', unread: true },
            { user: 'Priya Sharma', avatar: 'PS', message: "Let's meet tomorrow", time: '5m', unread: false },
            { user: 'Anita Patel', avatar: 'AP', message: 'Thanks for sharing!', time: '1h', unread: false },
            { user: 'Kumar Singh', avatar: 'KS', message: 'Great post!', time: '3h', unread: false }
        ];

        const commentsData = {
            1: [
                { user: 'Priya Sharma', text: 'Amazing! üåü', time: '1h ago', likes: 5 },
                { user: 'Kumar Singh', text: 'Love this!', time: '2h ago', likes: 3 }
            ],
            2: [
                { user: 'Rajesh Kumar', text: 'Beautiful jewelry!', time: '30m ago', likes: 8 },
                { user: 'Anita Patel', text: 'Where can I get this?', time: '1h ago', likes: 2 }
            ]
        };

        // Initialize
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById('loginPage').classList.remove('hidden');
            }, 2000);
        });

        // Profile image preview
        document.getElementById('profileImageInput').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const preview = document.getElementById('profilePreview');
                    preview.innerHTML = `<img src="${e.target.result}" class="w-full h-full object-cover">`;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        // Phone validation
        function checkPhone() {
            const phone = document.getElementById('phoneInput').value.replace(/\D/g, '');
            document.getElementById('phoneInput').value = phone;
            document.getElementById('sendOtpBtn').disabled = phone.length !== 10;
        }

        function sendOTP() {
            document.getElementById('phoneSection').style.display = 'none';
            document.getElementById('otpSection').classList.remove('hidden');
        }

        function verifyOTP() {
            const otp = document.getElementById('otpInput').value;
            if (otp === '123456') {
                currentUser = {
                    username: document.getElementById('usernameInput').value || 'User',
                    phone: document.getElementById('phoneInput').value
                };
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('app').classList.remove('hidden');
                initializeApp();
            } else {
                alert('Invalid OTP. Use 123456');
            }
        }

        function initializeApp() {
            loadStories();
            loadPosts();
            loadMessages();
            updateProfile();
            initReelScrollDetection();
            // Don't load reels until user goes to reels page
        }

        // Load Stories
        function loadStories() {
            const container = document.getElementById('storiesContainer');
            container.innerHTML = stories.map(story => `
        <div class="flex flex-col items-center" onclick="openStory('${story.image}', ${story.video ? `'${story.video}'` : 'null'})">
            <div class="story-circle">
                <div class="story-inner">
                    <img src="${story.image}" class="w-full h-full object-cover" alt="${story.name}">
                </div>
            </div>
            <p class="text-xs text-saffron-700 mt-1 font-medium">${story.name}</p>
        </div>
    `).join('');

            // Also load in search page
            const searchGrid = document.getElementById('searchStoriesGrid');
            if (searchGrid) {
                searchGrid.innerHTML = stories.map(story => `
            <div class="flex flex-col items-center" onclick="openStory('${story.image}', ${story.video ? `'${story.video}'` : 'null'})">
                <div class="story-circle">
                    <div class="story-inner">
                        <img src="${story.image}" class="w-full h-full object-cover" alt="${story.name}">
                    </div>
                </div>
                <p class="text-xs text-saffron-700 mt-1 font-medium truncate w-full text-center">${story.name}</p>
            </div>
        `).join('');
            }
        }

        function loadReels() {
            // Load first reel only
            loadReelVideo(0);
        }

        function loadReelVideo(index) {
            const container = document.getElementById(`reel-container-${index}`);
            if (!container || reelPlayers[index]) return;

            const iframe = document.createElement('iframe');
            iframe.className = 'w-full h-full';
            iframe.src = `https://www.youtube.com/embed/${reels[index].embed}?autoplay=1&mute=0&loop=1&playlist=${reels[index].embed}&controls=1&enablejsapi=1`;
            iframe.frameBorder = '0';
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            iframe.allowFullscreen = true;

            container.appendChild(iframe);
            reelPlayers[index] = iframe;
        }

        function unloadReelVideo(index) {
            const container = document.getElementById(`reel-container-${index}`);
            if (container) {
                container.innerHTML = '';
            }
            delete reelPlayers[index];
        }

        // Load Posts
        function loadPosts() {
            const feed = document.getElementById('postsFeed');
            feed.innerHTML = posts.map(post => `
                <div class="bg-white mb-2 shadow-sm">
                    <div class="p-4 flex items-center space-x-3">
                        <img src="${post.avatar}" alt="${post.user}" class="w-10 h-10 rounded-full object-cover">
                        <div class="flex-1">
                            <p class="font-semibold text-saffron-700">${post.user}</p>
                            <p class="text-xs text-saffron-500">${post.time}</p>
                        </div>
                        <button class="p-2 hover:bg-saffron-100 rounded-full transition">
                            <i class="fas fa-ellipsis-vertical text-saffron-600"></i>
                        </button>
                    </div>
                    <img src="${post.image}" alt="Post" class="w-full post-img">
                    <div class="p-4">
                        <div class="flex items-center space-x-4 mb-3">
                            <button onclick="toggleLike(${post.id})" class="like-heart ${likedPosts.has(post.id) ? 'liked' : ''}" aria-label="Like">
                                <i class="fa${likedPosts.has(post.id) ? 's' : 'r'} fa-heart text-2xl ${likedPosts.has(post.id) ? 'text-red-500' : 'text-saffron-600'}"></i>
                            </button>
                            <button onclick="openComments(${post.id})" aria-label="Comment">
                                <i class="far fa-comment text-2xl text-saffron-600"></i>
                            </button>
                            <button onclick="sharePost(${post.id})" aria-label="Share">
                                <i class="fas fa-share text-2xl text-saffron-600"></i>
                            </button>
                            <button onclick="savePost(${post.id})" class="ml-auto" aria-label="Save">
                                <i class="far fa-bookmark text-2xl text-saffron-600"></i>
                            </button>
                        </div>
                        <p class="font-semibold text-saffron-700 mb-1"><span id="likes-${post.id}">${post.likes}</span> likes</p>
                        <p class="text-saffron-700"><span class="font-semibold">${post.user}</span> ${post.caption}</p>
                        <button onclick="openComments(${post.id})" class="text-saffron-600 text-sm mt-2">View all ${post.comments} comments</button>
                        <div class="mt-3 space-y-2 border-t border-saffron-100 pt-3">
    <div class="flex items-start space-x-2">
        <div class="w-6 h-6 rounded-full bg-saffron-200 flex items-center justify-center text-xs font-semibold text-saffron-700">PS</div>
        <p class="text-sm text-saffron-700"><span class="font-semibold">priya_sharma</span> Amazing! üåü</p>
    </div>
    <div class="flex items-start space-x-2">
        <div class="w-6 h-6 rounded-full bg-saffron-200 flex items-center justify-center text-xs font-semibold text-saffron-700">RK</div>
        <p class="text-sm text-saffron-700"><span class="font-semibold">rajesh_k</span> Love this culture! ‚ù§Ô∏è</p>
    </div>
</div>
                    </div>
                </div>
            `).join('');
        }

        // Load Reels


        function initReelScrollDetection() {
            const reelsContainer = document.getElementById('reelsContainer');

            if (reelsContainer) {
                reelsContainer.addEventListener('scroll', () => {
                    const scrollTop = reelsContainer.scrollTop;
                    const windowHeight = window.innerHeight;
                    const newIndex = Math.round(scrollTop / windowHeight);

                    if (newIndex !== currentReelIndex && newIndex >= 0 && newIndex < reels.length) {
                        // Unload previous reel
                        unloadReelVideo(currentReelIndex);

                        // Load new reel
                        loadReelVideo(newIndex);

                        currentReelIndex = newIndex;
                    }
                });
            }
        }


        // Load Messages
        function loadMessages() {
            const container = document.getElementById('messagesList');
            container.innerHTML = messages.map(msg => `
                <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition cursor-pointer ${msg.unread ? 'border-l-4 border-saffron-500' : ''}">
                    <div class="flex items-center space-x-3">
                        <div class="profile-badge">${msg.avatar}</div>
                        <div class="flex-1">
                            <p class="font-semibold text-saffron-700">${msg.user}</p>
                            <p class="text-sm text-saffron-600 ${msg.unread ? 'font-semibold' : ''}">${msg.message}</p>
                        </div>
                        <span class="text-xs text-saffron-500">${msg.time}</span>
                    </div>
                </div>
            `).join('');
        }

        // Navigation
        function showPage(page) {
            ['feed', 'search', 'reels', 'messages', 'randomchat', 'profile'].forEach(p => {
                document.getElementById(p).classList.add('hidden');
            });

            // Stop all reels when leaving reels page
            if (page !== 'reels') {
                // Unload all reels
                Object.keys(reelPlayers).forEach(index => {
                    unloadReelVideo(parseInt(index));
                });
                currentReelIndex = 0;
            } else {
                // Load first reel when entering reels page
                setTimeout(() => {
                    loadReelVideo(0);
                }, 300);
            }

            document.getElementById('homeHeader').classList.add('hidden');
            document.getElementById('topNav').classList.add('hidden');

            if (page === 'feed') {
                document.getElementById('homeHeader').classList.remove('hidden');
            } else {
                document.getElementById('topNav').classList.remove('hidden');
                const titles = {
                    search: 'Search',
                    reels: 'Reels',
                    messages: 'Messages',
                    randomchat: 'Random Chat',
                    profile: 'Profile'
                };
                document.getElementById('topTitle').textContent = titles[page];
            }

            document.getElementById(page).classList.remove('hidden');
            currentPage = page;
        }

        function goBack() {
            showPage('feed');
        }

        function showProfile() {
            showPage('profile');
        }

        function updateProfile() {
            const initial = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('profileInitial').textContent = initial;
            document.getElementById('profileUsername').textContent = currentUser.username;
        }

        // Modals
        function showCreateModal() {
            document.getElementById('createModal').classList.remove('hidden');
        }

        function closeCreateModal() {
            document.getElementById('createModal').classList.add('hidden');
        }

        function showNotifications() {
            document.getElementById('notificationsModal').classList.remove('hidden');
        }

        function closeNotifications() {
            document.getElementById('notificationsModal').classList.add('hidden');
        }

        // Story
        function openStory(imageUrl, videoUrl = null) {
            const storyModal = document.getElementById('storyModal');
            const storyContent = storyModal.querySelector('.w-full.h-full');

            if (videoUrl) {
                storyContent.innerHTML = `
            <iframe src="${videoUrl}" 
                class="w-full h-full"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe>
        `;
            } else {
                storyContent.innerHTML = `
            <img id="storyImage" src="${imageUrl}" alt="Story" class="max-w-full max-h-full object-contain">
        `;
            }

            storyModal.classList.remove('hidden');
        }

        function closeStory() {
            const storyModal = document.getElementById('storyModal');
            const storyContent = storyModal.querySelector('.w-full.h-full');

            // Stop any playing video
            storyContent.innerHTML = '';

            storyModal.classList.add('hidden');
        }

        function likeStory() {
            showToast('Story liked! ‚ù§Ô∏è');
        }

        function shareStory() {
            showToast('Story shared! üì§');
        }

        // Post interactions
        function toggleLike(postId) {
            const likesEl = document.getElementById(`likes-${postId}`);
            let likes = parseInt(likesEl.textContent);

            if (likedPosts.has(postId)) {
                likedPosts.delete(postId);
                likes--;
            } else {
                likedPosts.add(postId);
                likes++;
            }

            likesEl.textContent = likes;
            loadPosts();
            showToast(likedPosts.has(postId) ? 'Post liked! ‚ù§Ô∏è' : 'Like removed');
        }

        function openComments(postId) {
            currentPostComments = commentsData[postId] || [];
            const container = document.getElementById('commentsList');
            container.innerHTML = currentPostComments.map(comment => `
                <div class="flex items-start space-x-3">
                    <div class="profile-badge text-xs">${comment.user.split(' ').map(n => n[0]).join('')}</div>
                    <div class="flex-1">
                        <p class="text-sm"><span class="font-semibold text-saffron-700">${comment.user}</span> ${comment.text}</p>
                        <div class="flex items-center space-x-4 mt-1 text-xs text-saffron-600">
                            <span>${comment.time}</span>
                            <button class="font-semibold">${comment.likes} likes</button>
                            <button class="font-semibold">Reply</button>
                        </div>
                    </div>
                </div>
            `).join('');
            document.getElementById('commentModal').classList.remove('hidden');
        }

        function closeCommentModal() {
            document.getElementById('commentModal').classList.add('hidden');
        }

        function postComment() {
            const input = document.getElementById('commentInput');
            const text = input.value.trim();
            if (text) {
                showToast('Comment posted! üí¨');
                input.value = '';
            }
        }

        function sharePost(postId) {
            showToast('Post shared! üì§');
        }

        function savePost(postId) {
            showToast('Post saved! üîñ');
        }

        // Create functions
        function createReel() {
            showToast('Opening camera for reel... üé•');
            closeCreateModal();
        }

        function uploadStory() {
            showToast('Opening gallery for story... üì∏');
            closeCreateModal();
        }

        function createPost() {
            showToast('Opening post creator... ‚úçÔ∏è');
            closeCreateModal();
        }

        // Reel interactions
        function likeReel(reelId) {
            showToast('Reel liked! ‚ù§Ô∏è');
        }

        function commentReel(reelId) {
            showToast('Opening comments... üí¨');
        }

        function shareReel(reelId) {
            showToast('Reel shared! üì§');
        }

        // Search
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const resultsContainer = document.getElementById('searchResults');

            if (!query) {
                resultsContainer.innerHTML = '<p class="text-center text-saffron-600 mt-8">Search for Banjara community members and content</p>';
                return;
            }

            const results = posts.filter(post =>
                post.user.toLowerCase().includes(query) ||
                post.caption.toLowerCase().includes(query)
            );

            if (results.length > 0) {
                resultsContainer.innerHTML = `
                    <div class="grid grid-cols-3 gap-1">
                        ${results.map(post => `
                            <img src="${post.image}" class="w-full aspect-square object-cover rounded cursor-pointer hover:opacity-75 transition">
                        `).join('')}
                    </div>
                `;
            } else {
                resultsContainer.innerHTML = '<p class="text-center text-saffron-600 mt-8">No results found</p>';
            }
        }

        // Random Chat
        let localStream = null;

        async function startRandomChat() {
            try {
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                document.getElementById('startChatBtn').classList.add('hidden');
                document.getElementById('chatInterface').classList.remove('hidden');
                showToast('Connected to random chat! üé•');
            } catch (error) {
                showToast('Camera access denied. Please allow camera access.');
            }
        }

        function endRandomChat() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
                localStream = null;
            }
            document.getElementById('startChatBtn').classList.remove('hidden');
            document.getElementById('chatInterface').classList.add('hidden');
            showToast('Chat ended');
        }

        // Toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-saffron-700 text-white px-6 py-3 rounded-full shadow-lg z-50 fade-in';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>

</html>